(()=>{"use strict";var e={704:(e,t,r)=>{r.r(t)},659:(e,t,r)=>{r.r(t)},283:(e,t,r)=>{r.r(t)},485:(e,t,r)=>{r.r(t)},717:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(842)),n=r(527);t.default=class{constructor(){this.controller=new o.default,this.view=new n.AppView}start(){document.querySelector(".sources").addEventListener("click",(e=>this.controller.getNews(e,(e=>this.view.drawNews(e))))),this.controller.getSources((e=>this.view.drawCapitalLetters(e)))}}},961:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.AppDataSources=void 0,t.AppDataSources=class{constructor(e=[]){this.sourcesData=e}filteredSources(e){return this.sourcesData.filter((t=>t.name[0]===e))}}},853:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(24));var n;!function(e){e.API_URL="https://newsapi.org/v2/",e.API_KEY="49f7f00097634047b51ec59052a49d04"}(n||(n={}));class a extends o.default{constructor(){super(n.API_URL,{apiKey:n.API_KEY})}}t.default=a},842:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(853));var n;!function(e){e.sources="sources",e.everything="everything"}(n||(n={}));class a extends o.default{getSources(e){super.getResp({endpoint:n.sources},e)}getNews(e,t){let r=e.target;const s=e.currentTarget;for(;r!==s;){if(r.classList.contains("source__item")){const e=r.getAttribute("data-source-id");return void(s.getAttribute("data-source")!==e&&e&&(s.setAttribute("data-source",e),super.getResp({endpoint:"everything",options:{sources:e}},t)))}r=r.parentNode}}}t.default=a},24:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t){this.baseLink=e,this.options=t}getResp({endpoint:e="",options:t={}},r=(()=>{console.error("No callback for GET response")})){this.load("GET",e,r,t)}errorHandler(e){if(!e.ok)throw 401!==e.status&&404!==e.status||console.log(`Sorry, but there is ${e.status} error: ${e.statusText}`),Error(e.statusText);return e}makeUrl(e,t){const r=Object.assign(Object.assign({},this.options),e);let s=`${this.baseLink}${t}?`;return Object.keys(r).forEach((e=>{s+=`${e}=${r[e]}&`})),s.slice(0,-1)}load(e,t,r,s={}){fetch(this.makeUrl(s,t),{method:e}).then(this.errorHandler).then((e=>e.json())).then((e=>r(e))).catch((e=>console.error(e)))}}},527:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.AppView=void 0;const o=s(r(798)),n=s(r(53)),a=r(961),c=s(r(593));class u{constructor(){this.news=new o.default,this.sources=new n.default,this.capitalLetters=new c.default,this.appDataSources=new a.AppDataSources}drawNews(e){const t=(null==e?void 0:e.articles)?null==e?void 0:e.articles:[];this.news.draw(t)}drawCapitalLetters(e){const t=(null==e?void 0:e.sources)?null==e?void 0:e.sources:[];this.appDataSources.sourcesData=t;const r=this.appDataSources.filteredSources("A");this.sources.draw(r),this.capitalLetters.draw(),this.capitalLetters.capitalLettersElem.addEventListener("click",(e=>{this.drawSources(e)}))}drawSources(e){const t=null==e?void 0:e.target;if(t.classList.contains("capital-letters__item")){const e=t.getAttribute("data-item"),r=this.appDataSources.filteredSources(e);this.sources.draw(r)}}}t.AppView=u,t.default=u},593:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),r(704),t.default=class{constructor(){this.capitalLettersElem=document.querySelector(".capital-letters"),this.letters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}draw(){return[...this.letters].forEach((e=>{const t=document.createElement("div");t.className="capital-letters__item",t.dataset.item=e,t.textContent=e,this.capitalLettersElem.append(t)})),this.capitalLettersElem}}},798:(e,t,r)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),r(659),function(e){e.newsItemTemp="#newsItemTemp",e.newsItem=".news__item",e.newsMetaPhoto=".news__meta-photo",e.newsMetaAuthor=".news__meta-author",e.newsMetaDate=".news__meta-date",e.newsDescriptionTitle=".news__description-title",e.newsDescriptionSource=".news__description-source",e.newsDescriptionContent=".news__description-content",e.newsReadMore=".news__read-more a",e.news=".news"}(s||(s={})),t.default=class{draw(e){const t=e.length>=10?e.filter(((e,t)=>t<10)):e,r=document.createDocumentFragment(),o=document.querySelector(s.newsItemTemp),n=document.querySelector(s.news);t.forEach(((e,t)=>{const n=o.content.cloneNode(!0),a=n.querySelector(s.newsItem),c=n.querySelector(s.newsMetaPhoto),u=n.querySelector(s.newsMetaAuthor),i=n.querySelector(s.newsMetaDate),l=n.querySelector(s.newsDescriptionTitle),d=n.querySelector(s.newsDescriptionSource),p=n.querySelector(s.newsDescriptionContent),f=n.querySelector(s.newsReadMore);t%2&&a.classList.add("alt"),c.style.backgroundImage=`url(${e.urlToImage||"img/news_placeholder.jpg"})`,u.textContent=e.author||e.source.name,i.textContent=e.publishedAt.slice(0,10).split("-").reverse().join("-"),l.textContent=e.title,d.textContent=e.source.name,p.textContent=e.description,f.setAttribute("href",e.url),r.append(n)})),n.innerHTML="",n.appendChild(r)}}},53:(e,t,r)=>{var s;Object.defineProperty(t,"__esModule",{value:!0}),r(283),function(e){e.sourceItemTemp="#sourceItemTemp",e.sourceItemName=".source__item-name",e.sourceItem=".source__item",e.sourceDataId="data-source-id",e.sources=".sources"}(s||(s={})),t.default=class{draw(e){const t=document.createDocumentFragment(),r=document.querySelector(s.sourceItemTemp),o=document.querySelector(s.sources);if(o.innerHTML="",!e.length){const e=document.createElement("div");return e.textContent="Sorry, sources not found",void o.append(e)}e.forEach((e=>{const o=r.content.cloneNode(!0),n=o.querySelector(s.sourceItemName),a=o.querySelector(s.sourceItem);n.textContent=e.name,a.setAttribute(s.sourceDataId,e.id),t.append(o)})),o.append(t)}}},607:function(e,t,r){var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const o=s(r(717));r(485),(new o.default).start()}},t={};function r(s){var o=t[s];if(void 0!==o)return o.exports;var n=t[s]={exports:{}};return e[s].call(n.exports,n,n.exports,r),n.exports}r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(607)})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJtYXBwaW5ncyI6IjJRQUFBLGtCQUNBLFNBb0JBLFVBakJBLE1BSUlBLGNBQ0lDLEtBQUtDLFdBQWEsSUFBSSxVQUN0QkQsS0FBS0UsS0FBTyxJQUFJLEVBQUFDLFFBR3BCQyxRQUNLQyxTQUFTQyxjQUFjLFlBQXNDQyxpQkFBaUIsU0FBVUMsR0FDckZSLEtBQUtDLFdBQVdRLFFBQVFELEdBQUlFLEdBQWdDVixLQUFLRSxLQUFLUyxTQUFTRCxPQUVuRlYsS0FBS0MsV0FBV1csWUFBWUYsR0FBa0NWLEtBQUtFLEtBQUtXLG1CQUFtQkgsUSxxRkNmbkcsdUJBR0lYLFlBQVllLEVBQXNCLElBQzlCZCxLQUFLZSxZQUFjRCxFQUdoQkUsZ0JBQWdCQyxHQUNuQixPQUFPakIsS0FBS2UsWUFBWUcsUUFBUUMsR0FBbUJBLEVBQUtDLEtBQUssS0FBT0gsTyx5SkNWNUUsaUJBRUEsSUFBS0ksR0FBTCxTQUFLQSxHQUNELG9DQUNBLDZDQUZKLENBQUtBLElBQUFBLEVBQU8sS0FLWixNQUFNQyxVQUFrQixVQUNwQnZCLGNBQ0l3QixNQUFNRixFQUFRRyxRQUFTLENBQ25CQyxPQUFRSixFQUFRSyxXQUs1QixVQUFlSixHLHlKQ2RmLGtCQUVBLElBQUtLLEdBQUwsU0FBS0EsR0FDRCxvQkFDQSwwQkFGSixDQUFLQSxJQUFBQSxFQUFRLEtBS2IsTUFBTUMsVUFBc0IsVUFDeEJoQixXQUFXaUIsR0FDUE4sTUFBTU8sUUFDRixDQUNJQyxTQUFVSixFQUFTYixTQUV2QmUsR0FJUnBCLFFBQVFELEVBQVVxQixHQUNkLElBQUlHLEVBQVN4QixFQUFFd0IsT0FDZixNQUFNQyxFQUFnQnpCLEVBQUUwQixjQUV4QixLQUFPRixJQUFXQyxHQUFlLENBQzdCLEdBQUlELEVBQU9HLFVBQVVDLFNBQVMsZ0JBQWlCLENBQzNDLE1BQU1DLEVBQVdMLEVBQU9NLGFBQWEsa0JBYXJDLFlBWklMLEVBQWNLLGFBQWEsaUJBQW1CRCxHQUFZQSxJQUMxREosRUFBY00sYUFBYSxjQUFlRixHQUMxQ2QsTUFBTU8sUUFDRixDQUNJQyxTQUFVLGFBQ1ZTLFFBQVMsQ0FDTDFCLFFBQVN1QixJQUdqQlIsS0FLWkcsRUFBU0EsRUFBT1MsYUFLNUIsVUFBZWIsRyw0RENNZixVQWhEQSxNQUlJN0IsWUFBWTJDLEVBQWtCRixHQUMxQnhDLEtBQUswQyxTQUFXQSxFQUNoQjFDLEtBQUt3QyxRQUFVQSxFQUdUVixTQUNOLFNBQUVDLEVBQVcsR0FBRSxRQUFFUyxFQUFVLElBQzNCWCxFQUFXLE1BQ1BjLFFBQVFDLE1BQU0sbUNBR2xCNUMsS0FBSzZDLEtBQUssTUFBT2QsRUFBVUYsRUFBVVcsR0FHbENNLGFBQWFDLEdBQ2hCLElBQUtBLEVBQUlDLEdBR0wsTUFGbUIsTUFBZkQsRUFBSUUsUUFBaUMsTUFBZkYsRUFBSUUsUUFDMUJOLFFBQVFPLElBQUksdUJBQXVCSCxFQUFJRSxpQkFBaUJGLEVBQUlJLGNBQzFEQyxNQUFNTCxFQUFJSSxZQUdwQixPQUFPSixFQUdITSxRQUFRYixFQUFzQlQsR0FDbEMsTUFBTXVCLEVBQWEsT0FBSCx3QkFBUXRELEtBQUt3QyxTQUFZQSxHQUN6QyxJQUFJZSxFQUFNLEdBQUd2RCxLQUFLMEMsV0FBV1gsS0FNN0IsT0FKQXlCLE9BQU9DLEtBQUtILEdBQVlJLFNBQVNDLElBQzdCSixHQUFPLEdBQUdJLEtBQU9MLEVBQVdLLFNBR3pCSixFQUFJSyxNQUFNLEdBQUksR0FHakJmLEtBQUtnQixFQUFnQjlCLEVBQWtCRixFQUFpQ1csRUFBVSxJQUN0RnNCLE1BQU05RCxLQUFLcUQsUUFBUWIsRUFBU1QsR0FBVyxDQUFFOEIsT0FBQUEsSUFDcENFLEtBQUsvRCxLQUFLOEMsY0FDVmlCLE1BQU1oQixHQUFRQSxFQUFJaUIsU0FDbEJELE1BQU1yRCxHQUFTbUIsRUFBU25CLEtBQ3hCdUQsT0FBT0MsR0FBUXZCLFFBQVFDLE1BQU1zQixRLDBLQzlDMUMsa0JBQ0EsV0FFQSxTQUNBLFlBRUEsTUFBYS9ELEVBTVRKLGNBQ0lDLEtBQUttRSxLQUFPLElBQUksVUFDaEJuRSxLQUFLYyxRQUFVLElBQUksVUFDbkJkLEtBQUtvRSxlQUFpQixJQUFJLFVBQzFCcEUsS0FBS3FFLGVBQWlCLElBQUksRUFBQUMsZUFHdkIzRCxTQUFTRCxHQUNaLE1BQU02RCxHQUFTN0QsTUFBQUEsT0FBSSxFQUFKQSxFQUFNOEQsVUFBVzlELE1BQUFBLE9BQUksRUFBSkEsRUFBTThELFNBQVcsR0FDakR4RSxLQUFLbUUsS0FBS00sS0FBS0YsR0FHWjFELG1CQUFtQkgsR0FDdEIsTUFBTTZELEdBQVM3RCxNQUFBQSxPQUFJLEVBQUpBLEVBQU1JLFNBQVVKLE1BQUFBLE9BQUksRUFBSkEsRUFBTUksUUFBVSxHQUMvQ2QsS0FBS3FFLGVBQWV0RCxZQUFjd0QsRUFDbEMsTUFBTUcsRUFBZ0IxRSxLQUFLcUUsZUFBZXJELGdCQUFnQixLQUMxRGhCLEtBQUtjLFFBQVEyRCxLQUFLQyxHQUNsQjFFLEtBQUtvRSxlQUFlSyxPQUNwQnpFLEtBQUtvRSxlQUFlTyxtQkFBbUJwRSxpQkFBaUIsU0FBVUMsSUFDOURSLEtBQUs0RSxZQUFZcEUsTUFJbEJvRSxZQUFZcEUsR0FDZixNQUFNd0IsRUFBU3hCLE1BQUFBLE9BQUMsRUFBREEsRUFBR3dCLE9BQ2xCLEdBQUlBLEVBQU9HLFVBQVVDLFNBQVMseUJBQTBCLENBQ3BELE1BQU1uQixFQUFTZSxFQUFPTSxhQUFhLGFBQzdCb0MsRUFBZ0IxRSxLQUFLcUUsZUFBZXJELGdCQUFnQkMsR0FDMURqQixLQUFLYyxRQUFRMkQsS0FBS0MsS0FsQzlCLFlBdUNBLFVBQWV2RSxHLCtEQzdDZixPQWtEQSxVQWhEQSxNQUlJSixjQUZBLEtBQUE0RSxtQkFBcUJ0RSxTQUFTQyxjQUFjLG9CQUd4Q04sS0FBSzZFLFFBQVUsQ0FDWCxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLElBQ0EsSUFDQSxJQUNBLEtBSVJKLE9BU0ksTUFSQSxJQUFJekUsS0FBSzZFLFNBQVNuQixTQUFTdkMsSUFDdkIsTUFBTUYsRUFBU1osU0FBU3lFLGNBQWMsT0FDdEM3RCxFQUFPOEQsVUFBWSx3QkFDbkI5RCxFQUFPK0QsUUFBUTdELEtBQU9BLEVBQ3RCRixFQUFPZ0UsWUFBYzlELEVBQ3JCbkIsS0FBSzJFLG1CQUFtQk8sT0FBT2pFLE1BRzVCakIsS0FBSzJFLHNCLGNDM0NwQixJQUFLUSxFLGlEQUZMLE9BRUEsU0FBS0EsR0FDRCwrQkFDQSx5QkFDQSxvQ0FDQSxzQ0FDQSxrQ0FDQSxrREFDQSxvREFDQSxzREFDQSxvQ0FDQSxlQVZKLENBQUtBLElBQUFBLEVBQWEsS0FrRGxCLFVBckNBLE1BQ1dWLEtBQUsvRCxHQUNSLE1BQU15RCxFQUFPekQsRUFBSzBFLFFBQVUsR0FBSzFFLEVBQUtRLFFBQU8sQ0FBQ21FLEVBQU9DLElBQVFBLEVBQU0sS0FBTTVFLEVBRW5FNkUsRUFBV2xGLFNBQVNtRix5QkFDcEJDLEVBQWVwRixTQUFTQyxjQUFjNkUsRUFBY00sY0FDcERDLEVBQVdyRixTQUFTQyxjQUFjNkUsRUFBY2hCLE1BRXREQSxFQUFLVCxTQUFRLENBQUN2QyxFQUFNbUUsS0FDaEIsTUFBTUssRUFBWUYsRUFBYUcsUUFBUUMsV0FBVSxHQUMzQ0MsRUFBV0gsRUFBVXJGLGNBQWM2RSxFQUFjVyxVQUNqREMsRUFBZ0JKLEVBQVVyRixjQUFjNkUsRUFBY1ksZUFDdERDLEVBQWlCTCxFQUFVckYsY0FBYzZFLEVBQWNhLGdCQUN2REMsRUFBZU4sRUFBVXJGLGNBQWM2RSxFQUFjYyxjQUNyREMsRUFBdUJQLEVBQVVyRixjQUFjNkUsRUFBY2Usc0JBQzdEQyxFQUF3QlIsRUFBVXJGLGNBQWM2RSxFQUFjZ0IsdUJBQzlEQyxFQUF5QlQsRUFBVXJGLGNBQWM2RSxFQUFjaUIsd0JBQy9EQyxFQUFlVixFQUFVckYsY0FBYzZFLEVBQWNrQixjQUV2RGYsRUFBTSxHQUFHUSxFQUFTM0QsVUFBVW1FLElBQUksT0FFcENQLEVBQWNRLE1BQU1DLGdCQUFrQixPQUFPckYsRUFBS3NGLFlBQWMsOEJBQ2hFVCxFQUFlZixZQUFjOUQsRUFBS3VGLFFBQVV2RixFQUFLd0YsT0FBT3ZGLEtBQ3hENkUsRUFBYWhCLFlBQWM5RCxFQUFLeUYsWUFBWWhELE1BQU0sRUFBRyxJQUFJaUQsTUFBTSxLQUFLQyxVQUFVQyxLQUFLLEtBQ25GYixFQUFxQmpCLFlBQWM5RCxFQUFLNkYsTUFDeENiLEVBQXNCbEIsWUFBYzlELEVBQUt3RixPQUFPdkYsS0FDaERnRixFQUF1Qm5CLFlBQWM5RCxFQUFLOEYsWUFDMUNaLEVBQWE5RCxhQUFhLE9BQVFwQixFQUFLb0MsS0FFdkNnQyxFQUFTTCxPQUFPUyxNQUdwQkQsRUFBU3dCLFVBQVksR0FDckJ4QixFQUFTeUIsWUFBWTVCLE0sYUM5QzdCLElBQUs2QixFLGlEQUZMLE9BRUEsU0FBS0EsR0FDRCxtQ0FDQSxzQ0FDQSw2QkFDQSxnQ0FDQSxxQkFMSixDQUFLQSxJQUFBQSxFQUFnQixLQXFDckIsVUE3QkEsTUFDSTNDLEtBQUsvRCxHQUNELE1BQU02RSxFQUFXbEYsU0FBU21GLHlCQUNwQjZCLEVBQWlCaEgsU0FBU0MsY0FBYzhHLEVBQWlCQyxnQkFDekRDLEVBQWFqSCxTQUFTQyxjQUFjOEcsRUFBaUJ0RyxTQUkzRCxHQUZBd0csRUFBV0osVUFBWSxJQUVsQnhHLEVBQUswRSxPQUFRLENBQ2QsTUFBTW1DLEVBQVlsSCxTQUFTeUUsY0FBYyxPQUd6QyxPQUZBeUMsRUFBVXRDLFlBQWMsZ0NBQ3hCcUMsRUFBV3BDLE9BQU9xQyxHQUl0QjdHLEVBQUtnRCxTQUFTdkMsSUFDVixNQUFNcUcsRUFBY0gsRUFBZXpCLFFBQVFDLFdBQVUsR0FDL0M0QixFQUFpQkQsRUFBWWxILGNBQWM4RyxFQUFpQkssZ0JBQzVEQyxFQUFhRixFQUFZbEgsY0FBYzhHLEVBQWlCTSxZQUU5REQsRUFBZXhDLFlBQWM5RCxFQUFLQyxLQUNsQ3NHLEVBQVduRixhQUFhNkUsRUFBaUJPLGFBQWN4RyxFQUFLeUcsSUFFNURyQyxFQUFTTCxPQUFPc0MsTUFFcEJGLEVBQVdwQyxPQUFPSyxNLHlKQ3BDMUIsa0JBQ0EsUUEwQlksSUFBSSxXQUNabkYsVUMzQkF5SCxFQUEyQixHQUcvQixTQUFTQyxFQUFvQkMsR0FFNUIsSUFBSUMsRUFBZUgsRUFBeUJFLEdBQzVDLFFBQXFCRSxJQUFqQkQsRUFDSCxPQUFPQSxFQUFhRSxRQUdyQixJQUFJQyxFQUFTTixFQUF5QkUsR0FBWSxDQUdqREcsUUFBUyxJQU9WLE9BSEFFLEVBQW9CTCxHQUFVTSxLQUFLRixFQUFPRCxRQUFTQyxFQUFRQSxFQUFPRCxRQUFTSixHQUdwRUssRUFBT0QsUUNwQmZKLEVBQW9CUSxFQUFLSixJQUNILG9CQUFYSyxRQUEwQkEsT0FBT0MsYUFDMUNoRixPQUFPaUYsZUFBZVAsRUFBU0ssT0FBT0MsWUFBYSxDQUFFRSxNQUFPLFdBRTdEbEYsT0FBT2lGLGVBQWVQLEVBQVMsYUFBYyxDQUFFUSxPQUFPLEtDRjdCWixFQUFvQixNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vTmV3c19BUEkvLi9zcmMvY29tcG9uZW50cy9hcHAvYXBwLnRzIiwid2VicGFjazovL05ld3NfQVBJLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9hcHBEYXRhU291cmNlcy50cyIsIndlYnBhY2s6Ly9OZXdzX0FQSS8uL3NyYy9jb21wb25lbnRzL2NvbnRyb2xsZXIvYXBwTG9hZGVyLnRzIiwid2VicGFjazovL05ld3NfQVBJLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9jb250cm9sbGVyLnRzIiwid2VicGFjazovL05ld3NfQVBJLy4vc3JjL2NvbXBvbmVudHMvY29udHJvbGxlci9sb2FkZXIudHMiLCJ3ZWJwYWNrOi8vTmV3c19BUEkvLi9zcmMvY29tcG9uZW50cy92aWV3L2FwcFZpZXcudHMiLCJ3ZWJwYWNrOi8vTmV3c19BUEkvLi9zcmMvY29tcG9uZW50cy92aWV3L2NhcGl0YWxMZXR0ZXJzL2NhcGl0YWxMZXR0ZXJzLnRzIiwid2VicGFjazovL05ld3NfQVBJLy4vc3JjL2NvbXBvbmVudHMvdmlldy9uZXdzL25ld3MudHMiLCJ3ZWJwYWNrOi8vTmV3c19BUEkvLi9zcmMvY29tcG9uZW50cy92aWV3L3NvdXJjZXMvc291cmNlcy50cyIsIndlYnBhY2s6Ly9OZXdzX0FQSS8uL3NyYy9pbmRleC50cyIsIndlYnBhY2s6Ly9OZXdzX0FQSS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9OZXdzX0FQSS93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL05ld3NfQVBJL3dlYnBhY2svc3RhcnR1cCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgQXBwQ29udHJvbGxlciBmcm9tICcuLi9jb250cm9sbGVyL2NvbnRyb2xsZXInO1xuaW1wb3J0IHsgQXBwVmlldyB9IGZyb20gJy4uL3ZpZXcvYXBwVmlldyc7XG5pbXBvcnQgeyBJRGF0YU5ld3MsIElEYXRhU291cmNlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlJztcblxuY2xhc3MgQXBwIHtcbiAgICBjb250cm9sbGVyOiBBcHBDb250cm9sbGVyO1xuICAgIHZpZXc6IEFwcFZpZXc7XG5cbiAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgdGhpcy5jb250cm9sbGVyID0gbmV3IEFwcENvbnRyb2xsZXIoKTtcbiAgICAgICAgdGhpcy52aWV3ID0gbmV3IEFwcFZpZXcoKTtcbiAgICB9XG5cbiAgICBzdGFydCgpIHtcbiAgICAgICAgKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zb3VyY2VzJykgYXMgUmVhZG9ubHk8SFRNTEVsZW1lbnQ+KS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PlxuICAgICAgICAgICAgdGhpcy5jb250cm9sbGVyLmdldE5ld3MoZSwgKGRhdGE6IElEYXRhTmV3cyB8IHVuZGVmaW5lZCkgPT4gdGhpcy52aWV3LmRyYXdOZXdzKGRhdGEpKVxuICAgICAgICApO1xuICAgICAgICB0aGlzLmNvbnRyb2xsZXIuZ2V0U291cmNlcygoZGF0YTogSURhdGFTb3VyY2UgfCB1bmRlZmluZWQpID0+IHRoaXMudmlldy5kcmF3Q2FwaXRhbExldHRlcnMoZGF0YSkpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQXBwO1xuIiwiaW1wb3J0IHsgSVNvdXJjZXMgfSBmcm9tICcuLi8uLi90eXBlcy9pbnRlcmZhY2UnO1xuXG5leHBvcnQgY2xhc3MgQXBwRGF0YVNvdXJjZXMge1xuICAgIHNvdXJjZXNEYXRhOiBJU291cmNlc1tdO1xuXG4gICAgY29uc3RydWN0b3Ioc291cmNlczogSVNvdXJjZXNbXSA9IFtdKSB7XG4gICAgICAgIHRoaXMuc291cmNlc0RhdGEgPSBzb3VyY2VzO1xuICAgIH1cblxuICAgIHB1YmxpYyBmaWx0ZXJlZFNvdXJjZXMobGV0dGVyOiBzdHJpbmcgfCBudWxsKSB7XG4gICAgICAgIHJldHVybiB0aGlzLnNvdXJjZXNEYXRhLmZpbHRlcigoaXRlbTogSVNvdXJjZXMpID0+IGl0ZW0ubmFtZVswXSA9PT0gbGV0dGVyKTtcbiAgICB9XG59IiwiaW1wb3J0IExvYWRlciBmcm9tICcuL2xvYWRlcic7XG5cbmVudW0gQVBJRGF0ZSB7XG4gICAgQVBJX1VSTCA9ICdodHRwczovL25ld3NhcGkub3JnL3YyLycsXG4gICAgQVBJX0tFWSA9ICc0OWY3ZjAwMDk3NjM0MDQ3YjUxZWM1OTA1MmE0OWQwNCcsXG59XG5cbmNsYXNzIEFwcExvYWRlciBleHRlbmRzIExvYWRlciB7XG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHN1cGVyKEFQSURhdGUuQVBJX1VSTCwge1xuICAgICAgICAgICAgYXBpS2V5OiBBUElEYXRlLkFQSV9LRVksIC8vINC/0L7Qu9GD0YfQuNGC0LUg0YHQstC+0Lkg0LrQu9GO0YcgaHR0cHM6Ly9uZXdzYXBpLm9yZy9cbiAgICAgICAgfSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcHBMb2FkZXI7XG4iLCJpbXBvcnQgeyBJRGF0YU5ld3MsIElEYXRhU291cmNlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlJztcbmltcG9ydCBBcHBMb2FkZXIgZnJvbSAnLi9hcHBMb2FkZXInO1xuXG5lbnVtIEVuZHBvaW50IHtcbiAgICBzb3VyY2VzID0gJ3NvdXJjZXMnLFxuICAgIGV2ZXJ5dGhpbmcgPSAnZXZlcnl0aGluZycsXG59XG5cbmNsYXNzIEFwcENvbnRyb2xsZXIgZXh0ZW5kcyBBcHBMb2FkZXIge1xuICAgIGdldFNvdXJjZXMoY2FsbGJhY2s6IChkYXRhPzogSURhdGFTb3VyY2UpID0+IHZvaWQpIHtcbiAgICAgICAgc3VwZXIuZ2V0UmVzcChcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBlbmRwb2ludDogRW5kcG9pbnQuc291cmNlcyxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBjYWxsYmFja1xuICAgICAgICApO1xuICAgIH1cblxuICAgIGdldE5ld3MoZTogRXZlbnQsIGNhbGxiYWNrOiAoZGF0YT86IElEYXRhTmV3cykgPT4gdm9pZCkge1xuICAgICAgICBsZXQgdGFyZ2V0ID0gZS50YXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG4gICAgICAgIGNvbnN0IG5ld3NDb250YWluZXIgPSBlLmN1cnJlbnRUYXJnZXQgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgd2hpbGUgKHRhcmdldCAhPT0gbmV3c0NvbnRhaW5lcikge1xuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3NvdXJjZV9faXRlbScpKSB7XG4gICAgICAgICAgICAgICAgY29uc3Qgc291cmNlSWQgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXNvdXJjZS1pZCcpO1xuICAgICAgICAgICAgICAgIGlmIChuZXdzQ29udGFpbmVyLmdldEF0dHJpYnV0ZSgnZGF0YS1zb3VyY2UnKSAhPT0gc291cmNlSWQgJiYgc291cmNlSWQpIHtcbiAgICAgICAgICAgICAgICAgICAgbmV3c0NvbnRhaW5lci5zZXRBdHRyaWJ1dGUoJ2RhdGEtc291cmNlJywgc291cmNlSWQpO1xuICAgICAgICAgICAgICAgICAgICBzdXBlci5nZXRSZXNwKFxuICAgICAgICAgICAgICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVuZHBvaW50OiAnZXZlcnl0aGluZycsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzb3VyY2VzOiBzb3VyY2VJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrXG4gICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlIGFzIEhUTUxFbGVtZW50O1xuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBBcHBDb250cm9sbGVyO1xuIiwiaW1wb3J0IHsgb3B0aW9uc1R5cGUgfSBmcm9tIFwiLi4vLi4vdHlwZXMvdHlwZXNcIjtcblxuY2xhc3MgTG9hZGVyIHtcbiAgICBwcml2YXRlIGJhc2VMaW5rOiBzdHJpbmc7XG4gICAgcHJpdmF0ZSBvcHRpb25zOiBvcHRpb25zVHlwZTtcblxuICAgIGNvbnN0cnVjdG9yKGJhc2VMaW5rOiBzdHJpbmcsIG9wdGlvbnM6IG9wdGlvbnNUeXBlKSB7XG4gICAgICAgIHRoaXMuYmFzZUxpbmsgPSBiYXNlTGluaztcbiAgICAgICAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcbiAgICB9XG5cbiAgICBwcm90ZWN0ZWQgZ2V0UmVzcChcbiAgICAgICAgeyBlbmRwb2ludCA9ICcnLCBvcHRpb25zID0ge30gfSxcbiAgICAgICAgY2FsbGJhY2sgPSAoKSA6IHZvaWQgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcignTm8gY2FsbGJhY2sgZm9yIEdFVCByZXNwb25zZScpO1xuICAgICAgICB9XG4gICAgKSB7XG4gICAgICAgIHRoaXMubG9hZCgnR0VUJywgZW5kcG9pbnQsIGNhbGxiYWNrLCBvcHRpb25zKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZXJyb3JIYW5kbGVyKHJlczogUmVzcG9uc2UpIHtcbiAgICAgICAgaWYgKCFyZXMub2spIHtcbiAgICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09PSA0MDEgfHwgcmVzLnN0YXR1cyA9PT0gNDA0KVxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGBTb3JyeSwgYnV0IHRoZXJlIGlzICR7cmVzLnN0YXR1c30gZXJyb3I6ICR7cmVzLnN0YXR1c1RleHR9YCk7XG4gICAgICAgICAgICB0aHJvdyBFcnJvcihyZXMuc3RhdHVzVGV4dCk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmVzO1xuICAgIH1cblxuICAgIHByaXZhdGUgbWFrZVVybChvcHRpb25zOiBvcHRpb25zVHlwZSwgZW5kcG9pbnQ6IHN0cmluZykge1xuICAgICAgICBjb25zdCB1cmxPcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMsIC4uLm9wdGlvbnMgfTtcbiAgICAgICAgbGV0IHVybCA9IGAke3RoaXMuYmFzZUxpbmt9JHtlbmRwb2ludH0/YDtcblxuICAgICAgICBPYmplY3Qua2V5cyh1cmxPcHRpb25zKS5mb3JFYWNoKChrZXkpID0+IHtcbiAgICAgICAgICAgIHVybCArPSBgJHtrZXl9PSR7dXJsT3B0aW9uc1trZXldfSZgO1xuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gdXJsLnNsaWNlKDAsIC0xKTtcbiAgICB9XG5cbiAgICBwcml2YXRlIGxvYWQobWV0aG9kOiBzdHJpbmcsIGVuZHBvaW50OiBzdHJpbmcsIGNhbGxiYWNrOiAoZGF0YT86IEpTT04pID0+IHZvaWQsIG9wdGlvbnMgPSB7fSkge1xuICAgICAgICBmZXRjaCh0aGlzLm1ha2VVcmwob3B0aW9ucywgZW5kcG9pbnQpLCB7IG1ldGhvZCB9KVxuICAgICAgICAgICAgLnRoZW4odGhpcy5lcnJvckhhbmRsZXIpXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiByZXMuanNvbigpKVxuICAgICAgICAgICAgLnRoZW4oKGRhdGEpID0+IGNhbGxiYWNrKGRhdGEpKVxuICAgICAgICAgICAgLmNhdGNoKChlcnIpID0+IGNvbnNvbGUuZXJyb3IoZXJyKSk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBMb2FkZXI7XG4iLCJpbXBvcnQgTmV3cyBmcm9tICcuL25ld3MvbmV3cyc7XG5pbXBvcnQgU291cmNlcyBmcm9tICcuL3NvdXJjZXMvc291cmNlcyc7XG5pbXBvcnQgeyBJRGF0YU5ld3MsIElEYXRhU291cmNlIH0gZnJvbSAnLi4vLi4vdHlwZXMvaW50ZXJmYWNlJztcbmltcG9ydCB7IEFwcERhdGFTb3VyY2VzIH0gZnJvbSAnLi4vY29udHJvbGxlci9hcHBEYXRhU291cmNlcyc7XG5pbXBvcnQgQ2FwaXRhbExldHRlcnMgZnJvbSAnLi9jYXBpdGFsTGV0dGVycy9jYXBpdGFsTGV0dGVycyc7XG5cbmV4cG9ydCBjbGFzcyBBcHBWaWV3IHtcbiAgICBwdWJsaWMgbmV3czogTmV3cztcbiAgICBwdWJsaWMgc291cmNlczogU291cmNlcztcbiAgICBwdWJsaWMgY2FwaXRhbExldHRlcnM6IENhcGl0YWxMZXR0ZXJzO1xuICAgIHByaXZhdGUgYXBwRGF0YVNvdXJjZXM6IEFwcERhdGFTb3VyY2VzO1xuXG4gICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgIHRoaXMubmV3cyA9IG5ldyBOZXdzKCk7XG4gICAgICAgIHRoaXMuc291cmNlcyA9IG5ldyBTb3VyY2VzKCk7XG4gICAgICAgIHRoaXMuY2FwaXRhbExldHRlcnMgPSBuZXcgQ2FwaXRhbExldHRlcnMoKTtcbiAgICAgICAgdGhpcy5hcHBEYXRhU291cmNlcyA9IG5ldyBBcHBEYXRhU291cmNlcygpO1xuICAgIH1cblxuICAgIHB1YmxpYyBkcmF3TmV3cyhkYXRhPzogSURhdGFOZXdzKTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHZhbHVlcyA9IGRhdGE/LmFydGljbGVzID8gZGF0YT8uYXJ0aWNsZXMgOiBbXTtcbiAgICAgICAgdGhpcy5uZXdzLmRyYXcodmFsdWVzKTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZHJhd0NhcGl0YWxMZXR0ZXJzKGRhdGE/OiBJRGF0YVNvdXJjZSk6IHZvaWQge1xuICAgICAgICBjb25zdCB2YWx1ZXMgPSBkYXRhPy5zb3VyY2VzID8gZGF0YT8uc291cmNlcyA6IFtdO1xuICAgICAgICB0aGlzLmFwcERhdGFTb3VyY2VzLnNvdXJjZXNEYXRhID0gdmFsdWVzO1xuICAgICAgICBjb25zdCBmaWx0ZXJTb3VyY2VzID0gdGhpcy5hcHBEYXRhU291cmNlcy5maWx0ZXJlZFNvdXJjZXMoJ0EnKTtcbiAgICAgICAgdGhpcy5zb3VyY2VzLmRyYXcoZmlsdGVyU291cmNlcyk7XG4gICAgICAgIHRoaXMuY2FwaXRhbExldHRlcnMuZHJhdygpO1xuICAgICAgICB0aGlzLmNhcGl0YWxMZXR0ZXJzLmNhcGl0YWxMZXR0ZXJzRWxlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgICAgICB0aGlzLmRyYXdTb3VyY2VzKGUpO1xuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICBwdWJsaWMgZHJhd1NvdXJjZXMoZT86IEV2ZW50KTogdm9pZCB7XG4gICAgICAgIGNvbnN0IHRhcmdldCA9IGU/LnRhcmdldCBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ2NhcGl0YWwtbGV0dGVyc19faXRlbScpKSB7XG4gICAgICAgICAgICBjb25zdCBsZXR0ZXIgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLWl0ZW0nKTtcbiAgICAgICAgICAgIGNvbnN0IGZpbHRlclNvdXJjZXMgPSB0aGlzLmFwcERhdGFTb3VyY2VzLmZpbHRlcmVkU291cmNlcyhsZXR0ZXIpO1xuICAgICAgICAgICAgdGhpcy5zb3VyY2VzLmRyYXcoZmlsdGVyU291cmNlcyk7XG4gICAgICAgIH1cbiAgICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IEFwcFZpZXc7XG4iLCJpbXBvcnQgJy4vY2FwaXRhbExldHRlcnMuY3NzJztcblxuY2xhc3MgQ2FwaXRhbExldHRlcnMge1xuICAgIGxldHRlcnM6IHN0cmluZ1tdO1xuICAgIGNhcGl0YWxMZXR0ZXJzRWxlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5jYXBpdGFsLWxldHRlcnMnKSBhcyBIVE1MRWxlbWVudDtcblxuICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICB0aGlzLmxldHRlcnMgPSBbXG4gICAgICAgICAgICAnQScsXG4gICAgICAgICAgICAnQicsXG4gICAgICAgICAgICAnQycsXG4gICAgICAgICAgICAnRCcsXG4gICAgICAgICAgICAnRScsXG4gICAgICAgICAgICAnRicsXG4gICAgICAgICAgICAnRycsXG4gICAgICAgICAgICAnSCcsXG4gICAgICAgICAgICAnSScsXG4gICAgICAgICAgICAnSicsXG4gICAgICAgICAgICAnSycsXG4gICAgICAgICAgICAnTCcsXG4gICAgICAgICAgICAnTScsXG4gICAgICAgICAgICAnTicsXG4gICAgICAgICAgICAnTycsXG4gICAgICAgICAgICAnUCcsXG4gICAgICAgICAgICAnUScsXG4gICAgICAgICAgICAnUicsXG4gICAgICAgICAgICAnUycsXG4gICAgICAgICAgICAnVCcsXG4gICAgICAgICAgICAnVScsXG4gICAgICAgICAgICAnVicsXG4gICAgICAgICAgICAnVycsXG4gICAgICAgICAgICAnWCcsXG4gICAgICAgICAgICAnWScsXG4gICAgICAgICAgICAnWicsXG4gICAgICAgIF07XG4gICAgfVxuXG4gICAgZHJhdygpIHtcbiAgICAgICAgWy4uLnRoaXMubGV0dGVyc10uZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGV0dGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBsZXR0ZXIuY2xhc3NOYW1lID0gJ2NhcGl0YWwtbGV0dGVyc19faXRlbSc7XG4gICAgICAgICAgICBsZXR0ZXIuZGF0YXNldC5pdGVtID0gaXRlbTtcbiAgICAgICAgICAgIGxldHRlci50ZXh0Q29udGVudCA9IGl0ZW07XG4gICAgICAgICAgICB0aGlzLmNhcGl0YWxMZXR0ZXJzRWxlbS5hcHBlbmQobGV0dGVyKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuY2FwaXRhbExldHRlcnNFbGVtO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ2FwaXRhbExldHRlcnM7IiwiaW1wb3J0IHsgSUFydGljbGVzIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMvaW50ZXJmYWNlJztcbmltcG9ydCAnLi9uZXdzLmNzcyc7XG5cbmVudW0gTmV3c1NlbGVjdG9ycyB7XG4gICAgbmV3c0l0ZW1UZW1wID0gJyNuZXdzSXRlbVRlbXAnLFxuICAgIG5ld3NJdGVtID0gJy5uZXdzX19pdGVtJyxcbiAgICBuZXdzTWV0YVBob3RvID0gJy5uZXdzX19tZXRhLXBob3RvJyxcbiAgICBuZXdzTWV0YUF1dGhvciA9ICcubmV3c19fbWV0YS1hdXRob3InLFxuICAgIG5ld3NNZXRhRGF0ZSA9ICcubmV3c19fbWV0YS1kYXRlJyxcbiAgICBuZXdzRGVzY3JpcHRpb25UaXRsZSA9ICcubmV3c19fZGVzY3JpcHRpb24tdGl0bGUnLFxuICAgIG5ld3NEZXNjcmlwdGlvblNvdXJjZSA9ICcubmV3c19fZGVzY3JpcHRpb24tc291cmNlJyxcbiAgICBuZXdzRGVzY3JpcHRpb25Db250ZW50ID0gJy5uZXdzX19kZXNjcmlwdGlvbi1jb250ZW50JyxcbiAgICBuZXdzUmVhZE1vcmUgPSAnLm5ld3NfX3JlYWQtbW9yZSBhJyxcbiAgICBuZXdzID0gJy5uZXdzJyxcbn1cblxuY2xhc3MgTmV3cyB7XG4gICAgcHVibGljIGRyYXcoZGF0YTogSUFydGljbGVzW10pIHtcbiAgICAgICAgY29uc3QgbmV3cyA9IGRhdGEubGVuZ3RoID49IDEwID8gZGF0YS5maWx0ZXIoKF9pdGVtLCBpZHgpID0+IGlkeCA8IDEwKSA6IGRhdGE7XG5cbiAgICAgICAgY29uc3QgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkgYXMgRG9jdW1lbnRGcmFnbWVudDtcbiAgICAgICAgY29uc3QgbmV3c0l0ZW1UZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihOZXdzU2VsZWN0b3JzLm5ld3NJdGVtVGVtcCkgYXMgSFRNTFRlbXBsYXRlRWxlbWVudDtcbiAgICAgICAgY29uc3QgbmV3c0VsZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKE5ld3NTZWxlY3RvcnMubmV3cykgYXMgSFRNTEVsZW1lbnQ7XG5cbiAgICAgICAgbmV3cy5mb3JFYWNoKChpdGVtLCBpZHgpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5ld3NDbG9uZSA9IG5ld3NJdGVtVGVtcC5jb250ZW50LmNsb25lTm9kZSh0cnVlKSBhcyBIVE1MRWxlbWVudDtcbiAgICAgICAgICAgIGNvbnN0IG5ld3NJdGVtID0gbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoTmV3c1NlbGVjdG9ycy5uZXdzSXRlbSkgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgIGNvbnN0IG5ld3NNZXRhUGhvdG8gPSBuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcihOZXdzU2VsZWN0b3JzLm5ld3NNZXRhUGhvdG8pIGFzIEhUTUxFbGVtZW50XG4gICAgICAgICAgICBjb25zdCBuZXdzTWV0YUF1dGhvciA9IG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKE5ld3NTZWxlY3RvcnMubmV3c01ldGFBdXRob3IpIGFzIEhUTUxFbGVtZW50XG4gICAgICAgICAgICBjb25zdCBuZXdzTWV0YURhdGUgPSBuZXdzQ2xvbmUucXVlcnlTZWxlY3RvcihOZXdzU2VsZWN0b3JzLm5ld3NNZXRhRGF0ZSkgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgIGNvbnN0IG5ld3NEZXNjcmlwdGlvblRpdGxlID0gbmV3c0Nsb25lLnF1ZXJ5U2VsZWN0b3IoTmV3c1NlbGVjdG9ycy5uZXdzRGVzY3JpcHRpb25UaXRsZSkgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgIGNvbnN0IG5ld3NEZXNjcmlwdGlvblNvdXJjZSA9IG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKE5ld3NTZWxlY3RvcnMubmV3c0Rlc2NyaXB0aW9uU291cmNlKSBhcyBIVE1MRWxlbWVudFxuICAgICAgICAgICAgY29uc3QgbmV3c0Rlc2NyaXB0aW9uQ29udGVudCA9IG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKE5ld3NTZWxlY3RvcnMubmV3c0Rlc2NyaXB0aW9uQ29udGVudCkgYXMgSFRNTEVsZW1lbnRcbiAgICAgICAgICAgIGNvbnN0IG5ld3NSZWFkTW9yZSA9IG5ld3NDbG9uZS5xdWVyeVNlbGVjdG9yKE5ld3NTZWxlY3RvcnMubmV3c1JlYWRNb3JlKSBhcyBIVE1MRWxlbWVudFxuXG4gICAgICAgICAgICBpZiAoaWR4ICUgMikgbmV3c0l0ZW0uY2xhc3NMaXN0LmFkZCgnYWx0Jyk7XG5cbiAgICAgICAgICAgIG5ld3NNZXRhUGhvdG8uc3R5bGUuYmFja2dyb3VuZEltYWdlID0gYHVybCgke2l0ZW0udXJsVG9JbWFnZSB8fCAnaW1nL25ld3NfcGxhY2Vob2xkZXIuanBnJ30pYDtcbiAgICAgICAgICAgIG5ld3NNZXRhQXV0aG9yLnRleHRDb250ZW50ID0gaXRlbS5hdXRob3IgfHwgaXRlbS5zb3VyY2UubmFtZTtcbiAgICAgICAgICAgIG5ld3NNZXRhRGF0ZS50ZXh0Q29udGVudCA9IGl0ZW0ucHVibGlzaGVkQXQuc2xpY2UoMCwgMTApLnNwbGl0KCctJykucmV2ZXJzZSgpLmpvaW4oJy0nKTtcbiAgICAgICAgICAgIG5ld3NEZXNjcmlwdGlvblRpdGxlLnRleHRDb250ZW50ID0gaXRlbS50aXRsZTtcbiAgICAgICAgICAgIG5ld3NEZXNjcmlwdGlvblNvdXJjZS50ZXh0Q29udGVudCA9IGl0ZW0uc291cmNlLm5hbWU7XG4gICAgICAgICAgICBuZXdzRGVzY3JpcHRpb25Db250ZW50LnRleHRDb250ZW50ID0gaXRlbS5kZXNjcmlwdGlvbjtcbiAgICAgICAgICAgIG5ld3NSZWFkTW9yZS5zZXRBdHRyaWJ1dGUoJ2hyZWYnLCBpdGVtLnVybCk7XG5cbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZChuZXdzQ2xvbmUpO1xuICAgICAgICB9KTtcblxuICAgICAgICBuZXdzRWxlbS5pbm5lckhUTUwgPSAnJztcbiAgICAgICAgbmV3c0VsZW0uYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xuICAgIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTmV3cztcbiIsImltcG9ydCB7IElTb3VyY2VzIH0gZnJvbSAnLi4vLi4vLi4vdHlwZXMvaW50ZXJmYWNlJztcbmltcG9ydCAnLi9zb3VyY2VzLmNzcyc7XG5cbmVudW0gU291cmNlc1NlbGVjdG9ycyB7XG4gICAgc291cmNlSXRlbVRlbXAgPSAnI3NvdXJjZUl0ZW1UZW1wJyxcbiAgICBzb3VyY2VJdGVtTmFtZSA9ICcuc291cmNlX19pdGVtLW5hbWUnLFxuICAgIHNvdXJjZUl0ZW0gPSAnLnNvdXJjZV9faXRlbScsXG4gICAgc291cmNlRGF0YUlkID0gJ2RhdGEtc291cmNlLWlkJyxcbiAgICBzb3VyY2VzID0gJy5zb3VyY2VzJyxcbn1cblxuY2xhc3MgU291cmNlcyB7XG4gICAgZHJhdyhkYXRhOiBJU291cmNlc1tdKSB7XG4gICAgICAgIGNvbnN0IGZyYWdtZW50ID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpIGFzIERvY3VtZW50RnJhZ21lbnQ7XG4gICAgICAgIGNvbnN0IHNvdXJjZUl0ZW1UZW1wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihTb3VyY2VzU2VsZWN0b3JzLnNvdXJjZUl0ZW1UZW1wKSBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xuICAgICAgICBjb25zdCBzb3VyY2VFbGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihTb3VyY2VzU2VsZWN0b3JzLnNvdXJjZXMpIGFzIEhUTUxFbGVtZW50O1xuXG4gICAgICAgIHNvdXJjZUVsZW0uaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgaWYgKCFkYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgZXJyb3JUZXh0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgICBlcnJvclRleHQudGV4dENvbnRlbnQgPSAnU29ycnksIHNvdXJjZXMgbm90IGZvdW5kJztcbiAgICAgICAgICAgIHNvdXJjZUVsZW0uYXBwZW5kKGVycm9yVGV4dCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBkYXRhLmZvckVhY2goKGl0ZW06IElTb3VyY2VzKSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VDbG9uZSA9IHNvdXJjZUl0ZW1UZW1wLmNvbnRlbnQuY2xvbmVOb2RlKHRydWUpIGFzIEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XG4gICAgICAgICAgICBjb25zdCBzb3VyY2VJdGVtTmFtZSA9IHNvdXJjZUNsb25lLnF1ZXJ5U2VsZWN0b3IoU291cmNlc1NlbGVjdG9ycy5zb3VyY2VJdGVtTmFtZSkgYXMgSFRNTFNwYW5FbGVtZW50O1xuICAgICAgICAgICAgY29uc3Qgc291cmNlSXRlbSA9IHNvdXJjZUNsb25lLnF1ZXJ5U2VsZWN0b3IoU291cmNlc1NlbGVjdG9ycy5zb3VyY2VJdGVtKSBhcyBIVE1MRGl2RWxlbWVudDtcblxuICAgICAgICAgICAgc291cmNlSXRlbU5hbWUudGV4dENvbnRlbnQgPSBpdGVtLm5hbWU7XG4gICAgICAgICAgICBzb3VyY2VJdGVtLnNldEF0dHJpYnV0ZShTb3VyY2VzU2VsZWN0b3JzLnNvdXJjZURhdGFJZCwgaXRlbS5pZCk7XG5cbiAgICAgICAgICAgIGZyYWdtZW50LmFwcGVuZChzb3VyY2VDbG9uZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBzb3VyY2VFbGVtLmFwcGVuZChmcmFnbWVudCk7XG4gICAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBTb3VyY2VzO1xuIiwiaW1wb3J0IEFwcCBmcm9tICcuL2NvbXBvbmVudHMvYXBwL2FwcCc7XG5pbXBvcnQgJy4vZ2xvYmFsLmNzcyc7XG5cbi8vY29uc3QgcmFuZG9tQ29sb3JCYWNrZ3JvdW5kID0gKCkgPT4ge1xuLy8gICAgbGV0IGhleCA9IFsnMCcsICcxJywgJzInLCAnMycsICc0JywgJzUnLCAnNicsICc3JywgJzgnLCAnOScsICdhJywgJ2InLCAnYycsICdkJywgJ2UnXTtcbi8vICAgIGxldCBhO1xuXG4vLyAgICBjb25zdCBwb3B1bGF0ZSA9IChhOiBzdHJpbmcsIGFycjogc3RyaW5nW10pID0+IHtcbi8vICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDY7IGkrKykge1xuLy8gICAgICAgICAgICBjb25zdCB4ID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMTQpO1xuLy8gICAgICAgICAgICBjb25zdCB5ID0gYXJyW3hdO1xuLy8gICAgICAgICAgICBhICs9IHk7XG4vLyAgICAgICAgfVxuLy8gICAgICAgIHJldHVybiBhO1xuLy8gICAgfTtcblxuLy8gICAgY29uc3QgY29sMSA9IHBvcHVsYXRlKCcjJywgaGV4KTtcbi8vICAgIGNvbnN0IGNvbDIgPSBwb3B1bGF0ZSgnIycsIGhleCk7XG4vLyAgICBjb25zdCBhbmdsZSA9ICd0byByaWdodCc7XG5cbi8vICAgIGNvbnN0IGdyYWRpZW50ID0gYGxpbmVhci1ncmFkaWVudCgke2FuZ2xlfSwgJHtjb2wxfSwgJHtjb2wyfSlgO1xuXG4vLyAgICByZXR1cm4gZ3JhZGllbnQ7XG4vL307XG5cbi8vZG9jdW1lbnQuYm9keS5zdHlsZS5iYWNrZ3JvdW5kID0gcmFuZG9tQ29sb3JCYWNrZ3JvdW5kKCk7XG5cbmNvbnN0IGFwcCA9IG5ldyBBcHAoKTtcbmFwcC5zdGFydCgpO1xuIiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsIi8vIHN0YXJ0dXBcbi8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuLy8gVGhpcyBlbnRyeSBtb2R1bGUgaXMgcmVmZXJlbmNlZCBieSBvdGhlciBtb2R1bGVzIHNvIGl0IGNhbid0IGJlIGlubGluZWRcbnZhciBfX3dlYnBhY2tfZXhwb3J0c19fID0gX193ZWJwYWNrX3JlcXVpcmVfXyg2MDcpO1xuIl0sIm5hbWVzIjpbImNvbnN0cnVjdG9yIiwidGhpcyIsImNvbnRyb2xsZXIiLCJ2aWV3IiwiQXBwVmlldyIsInN0YXJ0IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJnZXROZXdzIiwiZGF0YSIsImRyYXdOZXdzIiwiZ2V0U291cmNlcyIsImRyYXdDYXBpdGFsTGV0dGVycyIsInNvdXJjZXMiLCJzb3VyY2VzRGF0YSIsImZpbHRlcmVkU291cmNlcyIsImxldHRlciIsImZpbHRlciIsIml0ZW0iLCJuYW1lIiwiQVBJRGF0ZSIsIkFwcExvYWRlciIsInN1cGVyIiwiQVBJX1VSTCIsImFwaUtleSIsIkFQSV9LRVkiLCJFbmRwb2ludCIsIkFwcENvbnRyb2xsZXIiLCJjYWxsYmFjayIsImdldFJlc3AiLCJlbmRwb2ludCIsInRhcmdldCIsIm5ld3NDb250YWluZXIiLCJjdXJyZW50VGFyZ2V0IiwiY2xhc3NMaXN0IiwiY29udGFpbnMiLCJzb3VyY2VJZCIsImdldEF0dHJpYnV0ZSIsInNldEF0dHJpYnV0ZSIsIm9wdGlvbnMiLCJwYXJlbnROb2RlIiwiYmFzZUxpbmsiLCJjb25zb2xlIiwiZXJyb3IiLCJsb2FkIiwiZXJyb3JIYW5kbGVyIiwicmVzIiwib2siLCJzdGF0dXMiLCJsb2ciLCJzdGF0dXNUZXh0IiwiRXJyb3IiLCJtYWtlVXJsIiwidXJsT3B0aW9ucyIsInVybCIsIk9iamVjdCIsImtleXMiLCJmb3JFYWNoIiwia2V5Iiwic2xpY2UiLCJtZXRob2QiLCJmZXRjaCIsInRoZW4iLCJqc29uIiwiY2F0Y2giLCJlcnIiLCJuZXdzIiwiY2FwaXRhbExldHRlcnMiLCJhcHBEYXRhU291cmNlcyIsIkFwcERhdGFTb3VyY2VzIiwidmFsdWVzIiwiYXJ0aWNsZXMiLCJkcmF3IiwiZmlsdGVyU291cmNlcyIsImNhcGl0YWxMZXR0ZXJzRWxlbSIsImRyYXdTb3VyY2VzIiwibGV0dGVycyIsImNyZWF0ZUVsZW1lbnQiLCJjbGFzc05hbWUiLCJkYXRhc2V0IiwidGV4dENvbnRlbnQiLCJhcHBlbmQiLCJOZXdzU2VsZWN0b3JzIiwibGVuZ3RoIiwiX2l0ZW0iLCJpZHgiLCJmcmFnbWVudCIsImNyZWF0ZURvY3VtZW50RnJhZ21lbnQiLCJuZXdzSXRlbVRlbXAiLCJuZXdzRWxlbSIsIm5ld3NDbG9uZSIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJuZXdzSXRlbSIsIm5ld3NNZXRhUGhvdG8iLCJuZXdzTWV0YUF1dGhvciIsIm5ld3NNZXRhRGF0ZSIsIm5ld3NEZXNjcmlwdGlvblRpdGxlIiwibmV3c0Rlc2NyaXB0aW9uU291cmNlIiwibmV3c0Rlc2NyaXB0aW9uQ29udGVudCIsIm5ld3NSZWFkTW9yZSIsImFkZCIsInN0eWxlIiwiYmFja2dyb3VuZEltYWdlIiwidXJsVG9JbWFnZSIsImF1dGhvciIsInNvdXJjZSIsInB1Ymxpc2hlZEF0Iiwic3BsaXQiLCJyZXZlcnNlIiwiam9pbiIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJpbm5lckhUTUwiLCJhcHBlbmRDaGlsZCIsIlNvdXJjZXNTZWxlY3RvcnMiLCJzb3VyY2VJdGVtVGVtcCIsInNvdXJjZUVsZW0iLCJlcnJvclRleHQiLCJzb3VyY2VDbG9uZSIsInNvdXJjZUl0ZW1OYW1lIiwic291cmNlSXRlbSIsInNvdXJjZURhdGFJZCIsImlkIiwiX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fIiwiX193ZWJwYWNrX3JlcXVpcmVfXyIsIm1vZHVsZUlkIiwiY2FjaGVkTW9kdWxlIiwidW5kZWZpbmVkIiwiZXhwb3J0cyIsIm1vZHVsZSIsIl9fd2VicGFja19tb2R1bGVzX18iLCJjYWxsIiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwiZGVmaW5lUHJvcGVydHkiLCJ2YWx1ZSJdLCJzb3VyY2VSb290IjoiIn0=